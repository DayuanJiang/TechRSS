---
import '../styles/global.css';
interface Props {
  title: string;
}
const { title } = Astro.props;
const base = import.meta.env.BASE_URL.replace(/\/?$/, '/');
const path = Astro.url.pathname;
---
<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>{title}</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“°</text></svg>" />
</head>
<body class="bg-bg-page text-text-primary font-sans leading-relaxed antialiased overflow-x-hidden">
  <header class="sticky top-0 z-50 bg-accent/95 backdrop-blur-sm py-2.5 safe-top">
    <div class="max-w-2xl mx-auto px-3 sm:px-4 flex items-center gap-2 sm:gap-3">
      <a class="text-white font-bold text-base sm:text-lg whitespace-nowrap hover:no-underline" href={base}>TechDigest</a>
      <nav class="flex items-center gap-1 ml-auto text-sm">
        <a class={`px-2 py-0.5 rounded-md transition-colors ${path.includes('/hn') ? 'text-white/60 hover:text-white/80' : 'bg-white/20 text-white'}`} href={base}>æ—¥æŠ¥</a>
        <a class={`px-2 py-0.5 rounded-md transition-colors ${path.includes('/hn') ? 'bg-white/20 text-white' : 'text-white/60 hover:text-white/80'}`} href={`${base}hn/`}>HN</a>
      </nav>
    </div>
  </header>
  <main class="max-w-2xl mx-auto px-3 sm:px-4 py-3 sm:py-4">
    <slot />
  </main>
  <footer class="text-center py-4 text-xs text-text-tertiary safe-bottom">
    <div class="max-w-2xl mx-auto px-3 sm:px-4">
      åŸºäº Karpathy æ¨èçš„ HN çƒ­é—¨åšå®¢ RSS æº
    </div>
  </footer>
  <script is:inline>
    document.addEventListener('click', (e) => {
      // Don't toggle when clicking links
      if (e.target.closest('a')) return;
      const card = e.target.closest('.article-card');
      if (!card) return;
      const details = card.querySelector('.collapsed');
      const chevron = card.querySelector('.chevron-icon');
      if (details) {
        details.classList.toggle('open');
        if (chevron) chevron.classList.toggle('rotated', details.classList.contains('open'));
      }
    });
  </script>
</body>
</html>
